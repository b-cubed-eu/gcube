% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/virtualsample_to_sf.R
\name{virtualsample_to_sf}
\alias{virtualsample_to_sf}
\title{Convert virtualspecies sample to \code{sf} format}
\usage{
virtualsample_to_sf(virtual_sample, raster_lyr = NULL)
}
\arguments{
\item{virtual_sample}{A list output from
\code{virtualspecies::sampleOccurrences()}, containing \code{sample.points}
(a data frame with columns \code{x} and \code{y}) and \code{original.distribution.raster},
a \code{terra::SpatRaster} object.}

\item{raster_lyr}{Optional. A \code{terra::SpatRaster} (or list of rasters) from
which to extract values at sample locations. For example, habitat suitability
or probability of occurrence rasters.}
}
\value{
An \code{sf} object (point geometry) with the following columns:
\describe{
\item{id}{A character ID for each sample point (based on row names of \code{sample.points}).}
\item{observed}{Logical value indicating if the sample was observed (\code{TRUE}) or a non-detection (\code{FALSE}), based on the \code{Observed} column.}
\item{...}{Any additional columns from \code{sample.points} or extracted from the raster layer(s).}
\item{geometry}{Point geometry in the coordinate reference system of the original distribution raster.}
}
}
\description{
Converts virtual species samples generated with the \pkg{virtualspecies}
package into a spatial (\code{sf}) object compatible with \pkg{gcube} workflows.
Optionally extracts values from raster layers (e.g.habitat suitability or
probability of occurrence) at the sample locations.
}
\details{
This function is typically used as the first step after sampling from a virtual species distribution
before applying functions like \code{\link[=filter_observations]{filter_observations()}}, \code{\link[=add_coordinate_uncertainty]{add_coordinate_uncertainty()}},
and \code{\link[=grid_designation]{grid_designation()}}. See the vignette "Create occurrence cubes for virtual species" for a full workflow example.

If raster layers are provided through \code{raster_lyr}, the values at each point are extracted using \code{\link[terra:extract]{terra::extract()}} and appended to the output.
}
\examples{
\dontrun{
# After generating a virtual species and sampling occurrences:
detections_df_raw <- virtualsample_to_sf(virtual_sample)

# Optionally extract suitability and occurrence probability
virtualsample_to_sf(
  virtual_sample,
  raster_lyr = c(virtual_species$suitab.raster,
                 virtual_species$probability.of.occurrence))
}

}
